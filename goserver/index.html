<!DOCTYPE html>
<html>
  <head>
    <title>Visual Basic ;)</title>
    <meta charset="UTF-8" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script type="text/javascript">
     $(function() {
       $("#help").click(function(e) {
         $("#help_space").toggle()
         e.preventDefault();
       });

       $("form").submit(function(e) {
         var form = $(this)

         $.ajax({
           type: "POST",
           url: "/",
           data: form.serialize(),
           success: function(data)
           {
             $("#target").attr("src","data:image/gif;base64," + data);
           }
         });

         e.preventDefault();
       })
     });
    </script>
    <style type="text/css">
     textarea
     {
       width:100%;
     }
     img
     {
       border: 1px solid black;
     }
    </style>
  </head>
  <body>
    <div>
      <form method="POST" id="idForm" name="idForm" action="/">
        <textarea name="code" id="code" rows="30" cols="80">10 REM
20 REM This script will be executed with an 800x600 image
30 FOR x=0 TO 800
40 LET y = x / 128 * PI
50 LET y = 100 + ( 80 * SIN y )
60 PLOT x,y
70 NEXT x
    </textarea>
    <input type="submit" id="help" value="HELP"><input type="submit" id="submit" value="RUN CODE!" />
      </form>
    </div>
    <div id="help_space" style="display:none;">
      <h1>Help</h1>
      <p>Into the field above you can enter a BASIC program, which will be executed when you hit the <code>RUN CODE!</code> button.</p>
      <p>The program will have access to an 800x600 image, which will be returned when it finishes.</p>
      <p>To make your program update the image you can use the following functions:</p>
      <dl>
        <dt>CIRCLE x, y, r</dt>
        <dd>The <code>CIRCLE</code> function draws a circle of radius R at the coordinates x,y.  For example:</p><pre>10 COLOR 255,0,0
20 CIRCLE 50,50,50</pre></p></dd>
        <dt>COLOR a, b, c</dt>
        <dd>Set the color which is used for the drawing functions.  The arguments are "Red", "Green", and "Blue" respectively.  So to make a green-circle you would enter:</p><pre>10 COLOR 255,0,0
20 CIRCLE 50,50,50</pre></p></dd>
        <dt>PLOT x, y</dt>
        <dd>The <code>PLOT</code> function sets a single pixel at the specified coordinate.For example:</p><pre>10 COLOR 255,0,0
20 PLOT 50, 50
30 PLOT 100, 100
       </pre></p></dd>
      </dl>
      <h2>Sample Scripts</h2>
      <p>The following example draws overlapping circles of ever-increasing radius:</p><p><PRE>10 FOR I = 0 TO 2000 STEP 20
20  CIRCLE I, I, I
30  LET r = RND 255
40  LET g = RND 255
50  LET b = RND 255
60  COLOR r, g, b
70 NEXT I
</PRE></p>
    </div>
    <div style="text-align: center;">
      <img  id="target" src="" />
    </div>
  </body>
</html>
